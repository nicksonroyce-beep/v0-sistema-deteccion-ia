{% extends "layout.html" %}
{% block content %}
<div class="profile-container">
  <div class="profile-header">
    <h2><i class="fas fa-user"></i> Perfil de Usuario</h2>
  </div>

  <div class="profile-content">
    <div class="card profile-info">
      <div class="card-header">
        <h3><i class="fas fa-building"></i> Información de la Empresa</h3>
      </div>
      <div class="profile-details">
        <div class="detail-item">
          <label><i class="fas fa-tag"></i> Nombre de la Empresa:</label>
          <span>{{ session.get('empresa_nombre', 'No disponible') }}</span>
        </div>
        <div class="detail-item">
          <label><i class="fas fa-id-card"></i> ID de Empresa:</label>
          <span>{{ session.get('empresa_id', 'No disponible') }}</span>
        </div>
        <div class="detail-item">
          <label><i class="fas fa-calendar-alt"></i> Sesión iniciada:</label>
          <span id="sessionTime">Calculando...</span>
        </div>
        <div class="detail-item">
          <label><i class="fas fa-shield-alt"></i> Nivel de Seguridad:</label>
          <span class="security-level high">Alto</span>
        </div>
      </div>
    </div>

    <div class="card system-info">
      <div class="card-header">
        <h3><i class="fas fa-cogs"></i> Configuración del Sistema</h3>
      </div>
      <div class="config-grid">
        <div class="config-item">
          <div class="config-icon">
            <i class="fas fa-brain text-primary"></i>
          </div>
          <div class="config-details">
            <h4>Modelo de IA</h4>
            <p>Facenet512 - Reconocimiento facial avanzado</p>
          </div>
        </div>
        <div class="config-item">
          <div class="config-icon">
            <i class="fas fa-percentage text-success"></i>
          </div>
          <div class="config-details">
            <h4>Umbral de Similitud</h4>
            <p>60% - Precisión optimizada</p>
          </div>
        </div>
        <div class="config-item">
          <div class="config-icon">
            <i class="fas fa-envelope text-info"></i>
          </div>
          <div class="config-details">
            <h4>Alertas por Email</h4>
            <p>Activadas - Notificaciones automáticas</p>
          </div>
        </div>
        <div class="config-item">
          <div class="config-icon">
            <i class="fas fa-database text-warning"></i>
          </div>
          <div class="config-details">
            <h4>Base de Datos</h4>
            <p>MySQL - Almacenamiento seguro</p>
          </div>
        </div>
      </div>
    </div>

    <div class="card quick-actions">
      <div class="card-header">
        <h3><i class="fas fa-bolt"></i> Acciones Rápidas</h3>
      </div>
      <div class="actions-grid">
        <a href="{{ url_for('people_bp.people_page') }}" class="action-btn">
          <i class="fas fa-user-plus"></i>
          <span>Agregar Persona</span>
        </a>
        <a href="{{ url_for('events_bp.events_page') }}" class="action-btn">
          <i class="fas fa-history"></i>
          <span>Ver Historial</span>
        </a>
        <a href="{{ url_for('index') }}" class="action-btn">
          <i class="fas fa-video"></i>
          <span>Monitoreo en Vivo</span>
        </a>
        <a href="{{ url_for('instructions') }}" class="action-btn">
          <i class="fas fa-question-circle"></i>
          <span>Ayuda</span>
        </a>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", () => {
  // Calcular tiempo de sesión (simulado)
  const sessionStart = new Date();
  sessionStart.setHours(sessionStart.getHours() - 1); // Simular 1 hora de sesión
  
  function updateSessionTime() {
    const now = new Date();
    const diff = now - sessionStart;
    const hours = Math.floor(diff / (1000 * 60 * 60));
    const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
    
    document.getElementById('sessionTime').textContent = `${hours}h ${minutes}m`;
  }
  
  updateSessionTime();
  setInterval(updateSessionTime, 60000); // Actualizar cada minuto
});
</script>
{% endblock %}
